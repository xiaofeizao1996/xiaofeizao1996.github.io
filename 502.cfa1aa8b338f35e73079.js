"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[502],{61138:(e,t,r)=>{r.d(t,{Lx:()=>l,i5:()=>i});var n=r(41594);const s={theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,lineNumbers:"on",wordWrap:"on",readOnly:!1},a=()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)(null),a=(0,n.useRef)(!1),i=async()=>await Promise.all([r.e(440),r.e(96),r.e(715)]).then(r.bind(r,84153)),l=()=>{e.current&&("function"==typeof e.current.dispose&&e.current.dispose(),e.current=null,a.current=!1)};return(0,n.useEffect)(()=>l,[]),{editorRef:e,containerRef:t,isInitializedRef:a,loadMonaco:i,initMonacoEditor:async(r,n={},l=!1)=>{if(t.current&&(!a.current||l))try{const o=await i();requestAnimationFrame(async()=>{if(t.current&&(!e.current||l)){const i={...s,...n},l=r(o,t.current,i);e.current=l instanceof Promise?await l:l,a.current=!0}})}catch(e){console.error("Failed to initialize Monaco editor:",e)}},disposeEditor:l,DEFAULT_CONFIG:s}},i=e=>{const{value:t,onChange:r,language:s="plaintext",theme:i,readOnly:l,automaticLayout:o}=e,{editorRef:c,containerRef:d,isInitializedRef:u,initMonacoEditor:x}=a();return(0,n.useEffect)(()=>{x((e,n,a)=>{const i=e.editor.create(n,{value:t,language:s,...a});return i.onDidChangeModelContent(()=>{const e=i?.getValue()||"";r(e)}),i},{theme:i,readOnly:l,automaticLayout:o})},[s,r]),(0,n.useEffect)(()=>{if(c.current&&u.current){const e=c.current;e.getValue()!==t&&e.setValue(t)}},[t]),{containerRef:d,focusEditor:()=>{const e=c.current;e?.focus()},editor:c.current}},l=e=>{const{leftText:t,rightText:r,viewMode:s,theme:i}=e,{editorRef:l,containerRef:o,isInitializedRef:c,initMonacoEditor:d,loadMonaco:u}=a();return(0,n.useEffect)(()=>{d((e,n,a)=>{const i=e.editor.createDiffEditor(n,{...a,renderSideBySide:"split"===s,enableSplitViewResizing:!0,renderLineHighlight:"all",readOnly:!0}),l=e.editor.createModel(t,"plaintext"),o=e.editor.createModel(r,"plaintext");return i.setModel({original:l,modified:o}),i},{theme:i})},[]),(0,n.useEffect)(()=>{c.current&&(async()=>{if(l.current&&c.current)try{const e=await u(),n=e.editor.createModel(t,"plaintext"),s=e.editor.createModel(r,"plaintext");l.current.setModel({original:n,modified:s})}catch(e){console.error("Failed to update diff model:",e)}})()},[t,r]),{containerRef:o,editor:l.current}}},86680:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(65723),s=r(41594),a=r.n(s),i=r(61138);const l=a().memo(({value:e,onChange:t,language:r="plaintext",theme:s="vs-dark",readOnly:a=!1,className:l=""})=>{const{containerRef:o,focusEditor:c}=(0,i.i5)({value:e,onChange:t,language:r,theme:s,readOnly:a});return(0,n.jsx)("div",{className:`relative w-full h-full cursor-text ${l}`,ref:o,onClick:c})})},90121:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(65723),s=r(41594),a=r.n(s),i=r(9967),l=r(91871),o=r.n(l),c=r(86680);const d=a().memo(()=>{const e=(0,i.Zp)(),[t,r]=(0,s.useState)(""),[a,l]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),x=(0,s.useCallback)(()=>{if(!d||!a)return;const e=JSON.stringify(a,null,2);r(e)},[d,a]),f=(0,s.useCallback)(()=>{if(!d||!a)return;const e=JSON.stringify(a);r(e)},[d,a]),m=(0,s.useCallback)(()=>{r("")},[]);(0,s.useEffect)(()=>{if(!t.trim())return l(null),void u(!1);try{const e=JSON.parse(t);l(e),u(!0)}catch{l(null),u(!1)}},[t]),(0,s.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),x()),e.shiftKey&&e.altKey&&"F"===e.key&&(e.preventDefault(),x())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x]);const h=(0,s.useMemo)(()=>({characters:t.length,lines:t.split("\n").length,valid:d}),[t,d]);return(0,n.jsxs)("div",{className:"fixed inset-0 flex flex-col bg-gray-50",children:[(0,n.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between flex-shrink-0 z-10",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("button",{onClick:()=>e("/tools"),className:"px-3 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors flex items-center space-x-1",title:"è¿”å›žå·¥å…·åˆ—è¡¨",children:[(0,n.jsx)("span",{children:"â†"}),(0,n.jsx)("span",{children:"è¿”å›ž"})]}),(0,n.jsx)("div",{className:"border-l border-gray-300 h-8"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"JSON æ ¼å¼åŒ–å·¥å…·"}),(0,n.jsxs)("div",{className:"text-xs mt-1 flex items-center space-x-4",children:[(0,n.jsxs)("span",{className:"text-gray-500",children:["å­—ç¬¦: ",h.characters," | è¡Œæ•°: ",h.lines]}),(0,n.jsx)("span",{className:"font-medium "+(h.valid?"text-green-600":"text-red-600"),children:h.valid?"âœ“ æ ¼å¼æ­£ç¡®":"âœ— æ ¼å¼é”™è¯¯"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("button",{onClick:x,className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",disabled:!d,title:"å¿«æ·é”®: Ctrl+S / Cmd+S / Shift+Alt+F",children:[(0,n.jsx)("span",{children:"âœ¨ æ ¼å¼åŒ–"}),(0,n.jsx)("span",{className:"text-xs opacity-75",children:"Ctrl+S"})]}),(0,n.jsx)("button",{onClick:f,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!d,children:"ðŸ“¦ åŽ‹ç¼©"}),(0,n.jsx)("button",{onClick:m,className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"ðŸ—‘ï¸ æ¸…ç©º"})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-hidden flex",children:[(0,n.jsx)("div",{className:"flex-1 border-r border-gray-300",children:(0,n.jsx)(c.A,{value:t,onChange:r,language:"json",theme:"vs-dark"})}),(0,n.jsx)("div",{className:"flex-1 overflow-auto bg-[#272822]",children:d&&null!==a?(0,n.jsx)("div",{className:"h-full p-4",children:(0,n.jsx)(o(),{src:a,theme:"monokai",collapsed:!1,displayDataTypes:!1,displayObjectSize:!0,enableClipboard:!0,name:!1,style:{padding:"1rem",borderRadius:"0.375rem",fontSize:"14px",backgroundColor:"transparent"}})}):(0,n.jsx)("div",{className:"h-full flex items-center justify-center text-gray-400",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“"}),(0,n.jsx)("div",{className:"text-lg",children:t.trim()?"JSON æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥å·¦ä¾§ç¼–è¾‘å™¨ä¸­çš„é”™è¯¯æç¤º":"è¯·åœ¨å·¦ä¾§è¾“å…¥ JSON å†…å®¹"})]})})})]})]})}),u=()=>(0,n.jsx)(d,{})}}]);